import{j as R,k as O,r as C,c as p,w,l as Z,m as we,h as S,a as ee,g as E,n as N,p as ue,q as se,s as Se,t as ce,u as _e,o as xe,v as ze,x as Te,y as Ce,z as Le,A as Oe,B as K,C as B,d as de,D as Qe,E as Ve,_ as qe,G as fe,H as ve,I as Q,J as P,K as h,f as v,L as k,M as H,O as V,P as $e,Q as ge,R as M,S as G,F as J,U as ke,V as me,W as Ae}from"./index.b7cf31e4.js";import{Q as U,a as pe,b as he,C as Be,c as He,d as Pe,u as je,B as Re}from"./DesktopDrawer.vue_vue_type_style_index_0_lang.2429e990.js";import{u as be}from"./vue-i18n.runtime.esm-bundler.9ac6aaf0.js";import{Q as ae,a as F,b as D,c as Ee,d as Fe,e as De}from"./format.d7776d46.js";import{Q as X}from"./QCard.3fd4b064.js";import{u as Me}from"./global-option.ec27243e.js";var Ie=R({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:a}){const{proxy:{$q:o}}=E(),t=ee(N,O);if(t===O)return console.error("QHeader needs to be child of QLayout"),O;const n=C(parseInt(e.heightHint,10)),r=C(!0),s=p(()=>e.reveal===!0||t.view.value.indexOf("H")>-1||o.platform.is.ios&&t.isContainer.value===!0),d=p(()=>{if(e.modelValue!==!0)return 0;if(s.value===!0)return r.value===!0?n.value:0;const u=n.value-t.scroll.value.position;return u>0?u:0}),f=p(()=>e.modelValue!==!0||s.value===!0&&r.value!==!0),g=p(()=>e.modelValue===!0&&f.value===!0&&e.reveal===!0),y=p(()=>"q-header q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(f.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),z=p(()=>{const u=t.rows.value.top,x={};return u[0]==="l"&&t.left.space===!0&&(x[o.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),u[2]==="r"&&t.right.space===!0&&(x[o.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),x});function m(u,x){t.update("header",u,x)}function T(u,x){u.value!==x&&(u.value=x)}function _({height:u}){T(n,u),m("size",u)}function L(u){g.value===!0&&T(r,!0),a("focusin",u)}w(()=>e.modelValue,u=>{m("space",u),T(r,!0),t.animate()}),w(d,u=>{m("offset",u)}),w(()=>e.reveal,u=>{u===!1&&T(r,e.modelValue)}),w(r,u=>{t.animate(),a("reveal",u)}),w(t.scroll,u=>{e.reveal===!0&&T(r,u.direction==="up"||u.position<=e.revealOffset||u.position-u.inflectionPoint<100)});const q={};return t.instances.header=q,e.modelValue===!0&&m("size",n.value),m("space",e.modelValue),m("offset",d.value),Z(()=>{t.instances.header===q&&(t.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const u=we(l.default,[]);return e.elevated===!0&&u.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),u.push(S(U,{debounce:0,onResize:_})),S("header",{class:y.value,style:z.value,onFocusin:L},u)}}}),Ue=R({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:a}){const{proxy:{$q:o}}=E(),t=ee(N,O);if(t===O)return console.error("QFooter needs to be child of QLayout"),O;const n=C(parseInt(e.heightHint,10)),r=C(!0),s=C(ue.value===!0||t.isContainer.value===!0?0:window.innerHeight),d=p(()=>e.reveal===!0||t.view.value.indexOf("F")>-1||o.platform.is.ios&&t.isContainer.value===!0),f=p(()=>t.isContainer.value===!0?t.containerHeight.value:s.value),g=p(()=>{if(e.modelValue!==!0)return 0;if(d.value===!0)return r.value===!0?n.value:0;const i=t.scroll.value.position+f.value+n.value-t.height.value;return i>0?i:0}),y=p(()=>e.modelValue!==!0||d.value===!0&&r.value!==!0),z=p(()=>e.modelValue===!0&&y.value===!0&&e.reveal===!0),m=p(()=>"q-footer q-layout__section--marginal "+(d.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(y.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(d.value!==!0?" hidden":""):"")),T=p(()=>{const i=t.rows.value.bottom,b={};return i[0]==="l"&&t.left.space===!0&&(b[o.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),i[2]==="r"&&t.right.space===!0&&(b[o.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),b});function _(i,b){t.update("footer",i,b)}function L(i,b){i.value!==b&&(i.value=b)}function q({height:i}){L(n,i),_("size",i)}function u(){if(e.reveal!==!0)return;const{direction:i,position:b,inflectionPoint:$}=t.scroll.value;L(r,i==="up"||b-$<100||t.height.value-f.value-b-n.value<300)}function x(i){z.value===!0&&L(r,!0),a("focusin",i)}w(()=>e.modelValue,i=>{_("space",i),L(r,!0),t.animate()}),w(g,i=>{_("offset",i)}),w(()=>e.reveal,i=>{i===!1&&L(r,e.modelValue)}),w(r,i=>{t.animate(),a("reveal",i)}),w([n,t.scroll,t.height],u),w(()=>o.screen.height,i=>{t.isContainer.value!==!0&&L(s,i)});const c={};return t.instances.footer=c,e.modelValue===!0&&_("size",n.value),_("space",e.modelValue),_("offset",g.value),Z(()=>{t.instances.footer===c&&(t.instances.footer=void 0,_("size",0),_("offset",0),_("space",!1))}),()=>{const i=se(l.default,[S(U,{debounce:0,onResize:q})]);return e.elevated===!0&&i.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),S("footer",{class:m.value,style:T.value,onFocusin:x},i)}}}),Ne=R({name:"QPageContainer",setup(e,{slots:l}){const{proxy:{$q:a}}=E(),o=ee(N,O);if(o===O)return console.error("QPageContainer needs to be child of QLayout"),O;ce(_e,!0);const t=p(()=>{const n={};return o.header.space===!0&&(n.paddingTop=`${o.header.size}px`),o.right.space===!0&&(n[`padding${a.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(n.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(n[`padding${a.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),n});return()=>S("div",{class:"q-page-container",style:t.value},Se(l.default))}});const{passive:oe}=Ce,We=["both","horizontal","vertical"];var Ke=R({name:"QScrollObserver",props:{axis:{type:String,validator:e=>We.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:l}){const a={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,t,n;w(()=>e.scrollTarget,()=>{d(),s()});function r(){o!==null&&o();const y=Math.max(0,Le(t)),z=Oe(t),m={top:y-a.position.top,left:z-a.position.left};if(e.axis==="vertical"&&m.top===0||e.axis==="horizontal"&&m.left===0)return;const T=Math.abs(m.top)>=Math.abs(m.left)?m.top<0?"up":"down":m.left<0?"left":"right";a.position={top:y,left:z},a.directionChanged=a.direction!==T,a.delta=m,a.directionChanged===!0&&(a.direction=T,a.inflectionPoint=a.position),l("scroll",{...a})}function s(){t=Te(n,e.scrollTarget),t.addEventListener("scroll",f,oe),f(!0)}function d(){t!==void 0&&(t.removeEventListener("scroll",f,oe),t=void 0)}function f(y){if(y===!0||e.debounce===0||e.debounce==="0")r();else if(o===null){const[z,m]=e.debounce?[setTimeout(r,e.debounce),clearTimeout]:[requestAnimationFrame(r),cancelAnimationFrame];o=()=>{m(z),o=null}}}const{proxy:g}=E();return w(()=>g.$q.lang.rtl,r),xe(()=>{n=g.$el.parentNode,s()}),Z(()=>{o!==null&&o(),d()}),Object.assign(g,{trigger:f,getPosition:()=>a}),ze}}),Ge=R({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:l,emit:a}){const{proxy:{$q:o}}=E(),t=C(null),n=C(o.screen.height),r=C(e.container===!0?0:o.screen.width),s=C({position:0,direction:"down",inflectionPoint:0}),d=C(0),f=C(ue.value===!0?0:K()),g=p(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),y=p(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),z=p(()=>f.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${f.value}px`}:null),m=p(()=>f.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${f.value}px`,width:`calc(100% + ${f.value}px)`}:null);function T(c){if(e.container===!0||document.qScrollPrevented!==!0){const i={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};s.value=i,e.onScroll!==void 0&&a("scroll",i)}}function _(c){const{height:i,width:b}=c;let $=!1;n.value!==i&&($=!0,n.value=i,e.onScrollHeight!==void 0&&a("scrollHeight",i),q()),r.value!==b&&($=!0,r.value=b),$===!0&&e.onResize!==void 0&&a("resize",c)}function L({height:c}){d.value!==c&&(d.value=c,q())}function q(){if(e.container===!0){const c=n.value>d.value?K():0;f.value!==c&&(f.value=c)}}let u=null;const x={instances:{},view:p(()=>e.view),isContainer:p(()=>e.container),rootRef:t,height:n,containerHeight:d,scrollbarWidth:f,totalWidth:p(()=>r.value+f.value),rows:p(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:B({size:0,offset:0,space:!1}),right:B({size:300,offset:0,space:!1}),footer:B({size:0,offset:0,space:!1}),left:B({size:300,offset:0,space:!1}),scroll:s,animate(){u!==null?clearTimeout(u):document.body.classList.add("q-body--layout-animate"),u=setTimeout(()=>{u=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,i,b){x[c][i]=b}};if(ce(N,x),K()>0){let b=function(){c=null,i.classList.remove("hide-scrollbar")},$=function(){if(c===null){if(i.scrollHeight>o.screen.height)return;i.classList.add("hide-scrollbar")}else clearTimeout(c);c=setTimeout(b,300)},W=function(te){c!==null&&te==="remove"&&(clearTimeout(c),b()),window[`${te}EventListener`]("resize",$)},c=null;const i=document.body;w(()=>e.container!==!0?"add":"remove",W),e.container!==!0&&W("add"),de(()=>{W("remove")})}return()=>{const c=se(l.default,[S(Ke,{onScroll:T}),S(U,{onResize:_})]),i=S("div",{class:g.value,style:y.value,ref:e.container===!0?void 0:t,tabindex:-1},c);return e.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:t},[S(U,{onResize:L}),S("div",{class:"absolute-full",style:z.value},[S("div",{class:"scroll",style:m.value},[i])])]):i}}});const Je=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Xe=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function le(e){if(e!==Object(e)||Xe.has(Je.call(e))===!0||e.constructor&&Y.call(e,"constructor")===!1&&Y.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let l;for(l in e);return l===void 0||Y.call(e,l)}function ye(){let e,l,a,o,t,n,r=arguments[0]||{},s=1,d=!1;const f=arguments.length;for(typeof r=="boolean"&&(d=r,r=arguments[1]||{},s=2),Object(r)!==r&&typeof r!="function"&&(r={}),f===s&&(r=this,s--);s<f;s++)if((e=arguments[s])!==null)for(l in e)a=r[l],o=e[l],r!==o&&(d===!0&&o&&((t=Array.isArray(o))||le(o)===!0)?(t===!0?n=Array.isArray(a)===!0?a:[]:n=le(a)===!0?a:{},r[l]=ye(d,n,o)):o!==void 0&&(r[l]=o));return r}let I=null,ne;const j=[];function Ye(e){e.title&&(e.title=e.titleTemplate?e.titleTemplate(e.title):e.title,delete e.titleTemplate),[["meta","content"],["link","href"]].forEach(l=>{const a=e[l[0]],o=l[1];for(const t in a){const n=a[t];n.template&&(Object.keys(n).length===1?delete a[t]:(n[o]=n.template(n[o]||""),delete n.template))}})}function Ze(e,l){if(Object.keys(e).length!==Object.keys(l).length)return!0;for(const a in e)if(e[a]!==l[a])return!0}function re(e){return["class","style"].includes(e)===!1}function ie(e){return["lang","dir"].includes(e)===!1}function et(e,l){const a={},o={};return e===void 0?{add:l,remove:o}:(e.title!==l.title&&(a.title=l.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(t=>{const n=e[t],r=l[t];if(o[t]=[],n==null){a[t]=r;return}a[t]={};for(const s in n)r.hasOwnProperty(s)===!1&&o[t].push(s);for(const s in r)n.hasOwnProperty(s)===!1?a[t][s]=r[s]:Ze(n[s],r[s])===!0&&(o[t].push(s),a[t][s]=r[s])}),{add:a,remove:o})}function tt({add:e,remove:l}){e.title&&(document.title=e.title),Object.keys(l).length!==0&&(["meta","link","script"].forEach(a=>{l[a].forEach(o=>{document.head.querySelector(`${a}[data-qmeta="${o}"]`).remove()})}),l.htmlAttr.filter(ie).forEach(a=>{document.documentElement.removeAttribute(a)}),l.bodyAttr.filter(re).forEach(a=>{document.body.removeAttribute(a)})),["meta","link","script"].forEach(a=>{const o=e[a];for(const t in o){const n=document.createElement(a);for(const r in o[t])r!=="innerHTML"&&n.setAttribute(r,o[t][r]);n.setAttribute("data-qmeta",t),a==="script"&&(n.innerHTML=o[t].innerHTML||""),document.head.appendChild(n)}}),Object.keys(e.htmlAttr).filter(ie).forEach(a=>{document.documentElement.setAttribute(a,e.htmlAttr[a]||"")}),Object.keys(e.bodyAttr).filter(re).forEach(a=>{document.body.setAttribute(a,e.bodyAttr[a]||"")})}function at(){I=null;const e={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let l=0;l<j.length;l++){const{active:a,val:o}=j[l];a===!0&&ye(!0,e,o)}Ye(e),tt(et(ne,e)),ne=e}function A(){I!==null&&clearTimeout(I),I=setTimeout(at,50)}function ot(e){{const l={active:!0};if(typeof e=="function"){const a=p(e);l.val=a.value,w(a,o=>{l.val=o,l.active===!0&&A()})}else l.val=e;j.push(l),A(),Qe(()=>{l.active=!0,A()}),Ve(()=>{l.active=!1,A()}),de(()=>{j.splice(j.indexOf(l),1),A()})}}const lt={__name:"AboutDialog",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){const l=fe(),a=ve(),{t:o,locale:t}=be({useScope:"global"}),n=B({language:{icon:"translate",label:"dialog.about.setting.language.label",value:p({get:()=>{var d;return((d=l.params)==null?void 0:d.lang)==="tc"?"zh-TW":"en-US"},set:d=>null}),options:[{label:"\u7E41\u9AD4\u4E2D\u6587",value:"zh-TW"},{label:"English",value:"en-US"}]}}),r=[{icon:"flag",label:"dialog.about.project.purpose.label",caption:"dialog.about.project.purpose.caption"},{icon:"volunteer_activism",label:"dialog.about.project.about.label",caption:"dialog.about.project.about.caption"},{icon:"account_tree",label:"dialog.about.project.dataSource.label",caption:"dialog.about.project.dataSource.caption"},{icon:"lock",label:"dialog.about.project.dataOwnership.label",caption:"dialog.about.project.dataOwnership.caption"},{icon:"info",label:"dialog.about.project.version.label",caption:"dialog.about.project.version.caption"},{name:"bugReport",icon:"bug_report",label:"dialog.about.project.suggestionsOrBugReport.label",caption:"dialog.about.project.suggestionsOrBugReport.caption"},{name:"createdBy",imgSrc:"https://github.com/codinglau.png",label:"dialog.about.project.createdBy.label",caption:"dialog.about.project.createdBy.caption"}];function s(d){t.value=d,a.push({name:l.name,params:{...l.params,lang:d==="zh-TW"?"tc":"en"},query:{...l.query}})}return(d,f)=>(Q(),P(De,{persistent:"","model-value":e.modelValue,"onUpdate:modelValue":f[1]||(f[1]=g=>d.$emit("update:modelValue",g))},{default:h(()=>[v(X,{class:"dialog column no-wrap no-scroll"},{default:h(()=>[v(pe,{class:"bg-primary text-white justify-between"},{default:h(()=>[v(he,null,{default:h(()=>[k(H(V(o)("dialog.about.title")),1)]),_:1}),$e(v(ge,{flat:"",round:"",dense:"",icon:"close","aria-label":"Close"},null,512),[[Be]])]),_:1}),v(X,{flat:"",bordered:"",class:"col scroll"},{default:h(()=>[v(ae,null,{default:h(()=>[v(F,{avatar:""},{default:h(()=>[v(M,{icon:n.language.icon,"text-color":"primary"},null,8,["icon"])]),_:1}),v(F,null,{default:h(()=>[v(D,{caption:""},{default:h(()=>[k(H(V(o)(n.language.label)),1)]),_:1}),v(D,null,{default:h(()=>[v(X,{flat:"",bordered:""},{default:h(()=>[v(He,{spread:"",unelevated:"","no-caps":"",modelValue:n.language.value,"onUpdate:modelValue":[f[0]||(f[0]=g=>n.language.value=g),s],options:n.language.options,"toggle-color":"primary"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),v(Ee),v(Fe,{separator:""},{default:h(()=>[(Q(),G(J,null,ke(r,g=>v(ae,{key:g.caption},{default:h(()=>[v(F,{avatar:""},{default:h(()=>[g.icon?(Q(),P(M,{key:0,icon:g.icon,"text-color":"primary"},null,8,["icon"])):g.imgSrc?(Q(),P(M,{key:1},{default:h(()=>[v(Pe,{src:g.imgSrc},null,8,["src"])]),_:2},1024)):me("",!0)]),_:2},1024),v(F,null,{default:h(()=>[v(D,{caption:""},{default:h(()=>[k(H(V(o)(g.caption)),1)]),_:2},1024),v(D,null,{default:h(()=>[["bugReport","createdBy"].includes(g.name)?(Q(),G(J,{key:0},[k(" codinglau@gmail.com ")],64)):(Q(),G(J,{key:1},[k(H(V(o)(g.label)),1)],64))]),_:2},1024)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};var nt=qe(lt,[["__scopeId","data-v-1b140263"]]),rt={AboutDialog:nt};const vt={__name:"MainLayout",setup(e){const l=je(),a=fe(),o=ve(),{t}=be(),n=Me();function r(){o.push({name:"bus.home",params:{lang:a.params.lang}})}const s=C(!1),d=n.getCompanyList(!0),f=p(()=>a.name==="bus.routeList");return p(()=>a.name==="bus.routeList"&&l.screen.lt.md),ot(()=>({title:t("layout.header.title")})),(g,y)=>{const z=Ae("router-view");return Q(),P(Ge,{view:"lHh Lpr lFf"},{default:h(()=>[v(Ie,{reveal:"",bordered:""},{default:h(()=>[v(pe,null,{default:h(()=>[v(M,{icon:"fa-solid fa-bus-simple"}),v(he,{class:"cursor-pointer",onClick:r},{default:h(()=>[k(H(g.$t("layout.header.title")),1)]),_:1}),v(ge,{unelevated:"",stretch:"",icon:"fa-solid fa-gear","aria-label":g.$t("layout.tooltip.about"),onClick:y[0]||(y[0]=m=>s.value=!0)},null,8,["aria-label"])]),_:1})]),_:1}),V(f)?(Q(),P(Ue,{key:0,bordered:"",class:"bg-transparent text-dark"},{default:h(()=>[v(V(Re).CompanyTabs,{"outside-arrows":"","switch-indicator":"",class:"bg-white text-primary","active-bg-color":"primary","active-color":"white","indicator-color":"primary",options:V(d)},null,8,["options"])]),_:1})):me("",!0),v(Ne,{class:"bg-grey-2"},{default:h(()=>[v(z)]),_:1}),v(V(rt).AboutDialog,{modelValue:s.value,"onUpdate:modelValue":y[1]||(y[1]=m=>s.value=m)},null,8,["modelValue"])]),_:1})}}};export{vt as default};
